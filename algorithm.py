import numpy as np

places = np.array([
    # 1. 한식당 (가정식)
    [1,0,0,0,0,0,  0.5,0.3,0.4,0.2,0.1,0.6,  0.8,0.1,0.7,0.6,  0.95,0.6,0.4,0.1],
    # 2. 일식당 (초밥집)
    [1,0,0,0,0,0,  0.8,0.5,0.7,0.7,0.3,0.4,  0.7,0.1,0.6,0.7,  0.9,0.5,0.8,0.2],
    # 3. 중식당
    [1,0,0,0,0,0,  0.3,0.2,0.6,0.3,0.2,0.8,  0.6,0.3,0.7,0.4,  0.9,0.8,0.3,0.1],
    # 4. 양식당 (스테이크하우스)
    [1,0,0,0,0,0,  0.4,0.6,0.8,0.6,0.5,0.7,  0.7,0.2,0.7,0.6,  0.95,0.7,0.7,0.3],
    # 5. 분식집
    [1,0,0,0,0,0,  0.2,0.1,0.5,0.3,0.2,0.8,  0.8,0.2,0.8,0.3,  0.8,0.8,0.4,0.1],
    # 6. 고기집
    [1,0,0,0,0,0,  0.3,0.3,0.7,0.3,0.1,0.8,  0.7,0.3,0.9,0.4,  0.9,0.9,0.5,0.2],
    # 7. 뷔페
    [1,0,0,0,0,0,  0.5,0.4,0.6,0.5,0.2,0.7,  0.6,0.2,0.7,0.5,  0.95,0.8,0.4,0.2],
    # 8. 채식 레스토랑
    [1,0,0,0,0,0,  0.8,0.4,0.5,0.6,0.6,0.3,  0.9,0.1,0.5,0.9,  0.9,0.5,0.8,0.2],
    # 9. 패밀리 레스토랑
    [1,0,0,0,0,0,  0.5,0.5,0.6,0.5,0.3,0.7,  0.8,0.2,0.8,0.6,  0.95,0.7,0.5,0.2],
    # 10. 포장마차 스타일 식당
    [1,0,0,0,0,0,  0.3,0.2,0.7,0.3,0.2,0.9,  0.7,0.3,0.8,0.5,  0.85,0.8,0.3,0.1],
])

distances = np.array([
    1.2,  # 1. 한식당
    2.5,  # 2. 일식당
    3.8,  # 3. 중식당
    4.2,  # 4. 양식당
    0.8,  # 5. 분식집
    2.1,  # 6. 고기집
    3.5,  # 7. 뷔페
    1.9,  # 8. 채식 레스토랑
    4.8,  # 9. 패밀리 레스토랑
    0.5   # 10. 포장마차 스타일
])

# 평점 (1~5)
ratings = np.array([
    4.7,  # 1. 한식당
    4.8,  # 2. 일식당
    4.3,  # 3. 중식당
    4.6,  # 4. 양식당
    4.1,  # 5. 분식집
    4.5,  # 6. 고기집
    4.2,  # 7. 뷔페
    4.9,  # 8. 채식 레스토랑
    4.4,  # 9. 패밀리 레스토랑
    4.0   # 10. 포장마차
])

# 가격대 (1=저렴, 5=고급)
prices = np.array([
    2,  # 1. 한식당
    4,  # 2. 일식당
    3,  # 3. 중식당
    5,  # 4. 양식당
    1,  # 5. 분식집
    3,  # 6. 고기집
    4,  # 7. 뷔페
    3,  # 8. 채식 레스토랑
    4,  # 9. 패밀리 레스토랑
    1   # 10. 포장마차
])

persona = [1,0,0,0,0,0,  0.9,0.7,0.5,0.8,0.8,0.3,  0.8,0.1,0.7,0.9,  0.95,0.3,0.8,0.4]

def cos_similarity(A, B):
    return np.dot(A, B)/(np.linalg.norm(A)*np.linalg.norm(B))

def recommend_topk(places, persona, k=3, alpha=0.8, beta=0.7, gamma=0.2, delta=0.4):
    similiarities = [cos_similarity(place, persona) for place in places]
    print(np.argsort(similiarities)[:k])
    scores = [alpha*similarity + beta*distance + gamma*rating + delta*price \
                for (similarity, distance, rating, price) in zip(similiarities, distances, ratings, prices)]
    idxs = np.argsort(scores)[:k]
    return idxs

if __name__ == '__main__':
    idxs = recommend_topk(places, persona)
    print(idxs)